{% load static cms_js_tags sekizai_tags thumbnail l10n %}

{% addtoblock "js" %}<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD71sHrtkZMnLqTbgRmY_NsO0A9l9BQmv4&callback=initMap"></script>{% endaddtoblock %}

{% addtoblock "css" %}
<style>
#cascadeelement_id-{{ instance.pk }} {
	width: {{ instance.glossary.map_width }};
	height: {{ instance.glossary.map_height }};
}
</style>
{% endaddtoblock %}

{% addtoblock "js" %}
<script type="text/javascript">
function initMap() {
	var data = {{ instance.glossary.leaflet|json }};
	var viewMap = new google.maps.Map(document.getElementById('cascadeelement_id-{{ instance.pk }}'), {
		zoom: data.zoom,
		center: data
	});
	{% for marker in markers %}
	(function(position) {
	console.log(position);
		var marker = new google.maps.Marker({
			position: position,
			map: viewMap
		});
	})({{ marker.glossary.leaflet|json }});
	{% endfor %}
}
</script>
{% endaddtoblock %}

<div id="cascadeelement_id-{{ instance.pk }}"></div>
