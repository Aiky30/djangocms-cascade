{% load static cms_js_tags sekizai_tags thumbnail l10n %}

{% addtoblock "js" %}<script async defer src="https://maps.googleapis.com/maps/api/js?key={{ settings.apiKey }}&callback=initMap"></script>{% endaddtoblock %}

{% addtoblock "css" %}
<style>
#cascadeelement_id-{{ instance.pk }} {
	width: {{ instance.glossary.map_width }};
	height: {{ instance.glossary.map_height }};
}
</style>
{% endaddtoblock %}

{% addtoblock "js" %}
<script type="text/javascript">
function initMap() {
	var mapPosition = {{ instance.glossary.map_position|json }};
	var viewMap = new google.maps.Map(document.getElementById('cascadeelement_id-{{ instance.pk }}'), {
		zoom: mapPosition.zoom,
		center: mapPosition
	});
	{% for marker in markers %}
	(function(position) {
		var marker = new google.maps.Marker({
			position: position,
			map: viewMap
		});
	})({{ marker.glossary.position|json }});
	{% endfor %}
}
</script>
{% endaddtoblock %}

<div id="cascadeelement_id-{{ instance.pk }}"></div>
